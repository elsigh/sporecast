<!DOCTYPE html>
  <html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="format-detection"
      content="telephone=no,email=no,address=no">
    <meta name="viewport"
      content="user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1,width=device-width">

    <link rel="stylesheet" href="css/base.css">

    <!--<script src="http://clipport.net/target/target-script-min.js#R6b6Cp06"></script>-->
    <title>Mushroom Forecast</title>

  </head>
  <body>
    <div class="mf-app">

      <h1><span>Mushroom Forecast</span></h1>

      <nav class="mf-tabs-c">
        <div class="mf-tabs">
          <a href="weather" class="weather mf-app-link">Weather</a
            ><a href="mushroomobserver" class="mushroomobserver mf-app-link"
            >Observer</a>
        </div>
      </nav>

      <div class="mf-tab-frame-c">
        <div class="mf-tab-frame">
          <section class="mf-tab mf-tab-weather">
            <div class="mf-weather"></div>
          </section
          ><section class="mf-tab mf-tab-mushroomobserver">
            <div class="mf-mushroomobserver"></div>
          </section>
        </div>
      </div>

      <div class="mf-loading" style="display:none;"></div>
      <div class="mf-msg-c" style="display:none;"><div class="mf-msg"></div></div>
    </div>

    <script>
      var cordovaSrc_;
      if (window.location.protocol === 'file:') {
        cordovaSrc_ = 'cordova.js';
      }

      if (cordovaSrc_) {
        document.write('<scr'+'ipt src="' + cordovaSrc_ + '"></sc'+'ript>');

      } else {
        // Stubs cordova so we can run this page on the web not as a
        // cordova app.
        cordova = {
          addConstructor: function() {},
          require: function() {},
          define: function() {}
        };
      }
    </script>

    <script src="js/zepto.js"></script>
    <script src="js/touch.js"></script>
    <script src="js/underscore.js"></script>
    <script src="js/backbone.js"></script>
    <!--<script src="js/backbone.localStorage.js"></script>
    <script src="js/backbone-identity-map.js"></script>-->
    <script src="js/hogan.js"></script>

    <script src="js/mf.js"></script>
    <script src="js/app.js"></script>
    <script src="js/models_mf.js"></script>
    <script src="js/models.js"></script>
    <script src="js/views.js"></script>

    <script id="tpl_weather" type="text/html">
      <form class="mf-weather-prefs">
        <div>
          <select name="city">
            {{#cities}}
              <option>{{.}}</option>
            {{/cities}}
          </select>
        </div>

        <div>
          Today in {{prefs.city}}...
        </div>

        <div>
          <select name="month">
            {{#months}}
              <option>{{.}}</option>
            {{/months}}
          </select>

          <select name="year">
            {{#years}}
              <option>{{.}}</option>
            {{/years}}
          </select>
        </div>
      </form>
    </script>

    <script id="tpl_weather_month" type="text/html">
      {{#days}}

      {{/days}}
    </script>

    <script id="tpl_mushroom_observer" type="text/html">
      <h2>Mushroom Observer</h2>

    </script>



    <script>
      // Catch-all.
      window.onerror = function(message, url, lineNumber) {
        window.console.log('window.onerror GLOBAL FAIL: ' + message + ', ' +
            url + ', ' + lineNumber);
      };

      // Hogan.
      window.templates = {};
      $('script[type="text/html"]').each(function(i, script) {
        var name = script.id.replace('tpl_', '');
        var html = $(script).html().trim();
        window.templates[name] = Hogan.compile(html);
      });

      // Super-wild-west-runtime-unit-testing.
      if (window.location.search.indexOf('?test=1') !== -1) {
        var testFiles = [
          'closure_jsunit.js',
          'sinon.js',
          'app_test.js'
        ];
        $.each(testFiles, function(i, src) {
          document.write('<scr'+'ipt src="' + src + '"></sc'+'ript>');
        });

      // Load the app as a cordova app.
      } else if (cordovaSrc_) {
        document.addEventListener('deviceready', function() {
          window['app'] = new mf.App();
        }, false);

      // Load the app ala webapp style.
      } else {
        $(document).ready(function() {
          window['app'] = new mf.App();
        });
      }

      if (window.location.href.match(/mushroomforecast.com/i)) {
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', '', 'mushroomforecast.com');
        ga('send', 'pageview');
      }
    </script>
  </body>
  </html>
